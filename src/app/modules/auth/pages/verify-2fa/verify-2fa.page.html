<ion-content class="ion-padding">
  <ion-grid class="verification-container">
    <ion-grid class="auth-card">
      <!-- Icono de seguridad circular -->
      <ion-grid class="icon-circle">
        <ion-icon name="lock-closed"></ion-icon>
      </ion-grid>

      <ion-text class="ion-text-center"><ion-label>Verificación de Seguridad</ion-label></ion-text>
      <ion-text class="ion-text-center text-secondary ion-margin-bottom">
        <ion-label>Hemos enviado un código de 6 dígitos a tu email</ion-label>
      </ion-text>

      <!-- Formulario de código -->
      <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <ion-grid class="form-group">
          <ion-label class="form-label">Código de Verificación</ion-label>
          <ion-item lines="none">
            <ion-input type="text" formControlName="code" placeholder="000000" maxlength="6" inputmode="numeric"
              pattern="[0-9]*" class="code-input">
            </ion-input>
          </ion-item>
          <ion-text class="ion-text-center text-secondary" style="font-size: 0.85rem; margin-top: 0.5rem;">
            <ion-label>Ingresa el código de 6 dígitos</ion-label>
          </ion-text>
        </ion-grid>

        <ion-button expand="block" type="submit" color="primary" [disabled]="loading || form.invalid"
          class="ion-margin-top">
          <ion-spinner *ngIf="loading" name="crescent"></ion-spinner>
          <ion-label *ngIf="!loading">Verificar Código</ion-label>
        </ion-button>
      </form>

      <!-- Reenviar código -->
      <ion-grid class="ion-text-center ion-margin-top">
        <ion-text class="text-secondary" style="margin-bottom: 0.5rem;">
          <ion-label>¿No recibiste el código?</ion-label>
        </ion-text>
        <ion-button fill="clear" size="small" (click)="resendCode()" [disabled]="countdown > 0 || resendLoading">
          <ion-spinner *ngIf="resendLoading" name="crescent" slot="start"></ion-spinner>
          <ion-label *ngIf="countdown > 0" class="resend-text">Reenviar en {{ countdown }}s</ion-label>
          <ion-label *ngIf="countdown === 0 && !resendLoading" class="resend-text">Reenviar código</ion-label>
        </ion-button>
      </ion-grid>

      <!-- Información de seguridad -->
      <ion-grid class="security-info ion-margin-top">
        <ion-icon name="information-circle-outline" color="primary"></ion-icon>
        <ion-text class="text-secondary">
          <ion-label><strong>Seguridad:</strong> Este código expira en 10 minutos. No lo compartas con nadie.</ion-label>
        </ion-text>
      </ion-grid>
    </ion-grid>
  </ion-grid>
</ion-content>