<ion-content>
  <ion-grid class="ion-padding ion-text-center">
    <ion-grid *ngIf="!escaneando">
      <ion-icon name="qr-code-outline" style="font-size: 120px; color: var(--ion-color-primary);"></ion-icon>
      
      <ion-text><ion-label>Escanear QR del Cliente</ion-label></ion-text>
      <ion-text class="ion-text-muted">
        <ion-label>Escanea el código QR del turno del cliente para validarlo y marcarlo como atendido</ion-label>
      </ion-text>

      <ion-button 
        expand="block" 
        size="large" 
        color="primary" 
        (click)="iniciarEscaneo()"
        [disabled]="!permisoCamara">
        <ion-icon name="scan" slot="start"></ion-icon>
        Iniciar Escaneo
      </ion-button>

      <ion-note *ngIf="!permisoCamara" color="danger">
        <ion-icon name="warning"></ion-icon>
        Se requiere permiso de cámara
      </ion-note>

      <!-- Instrucciones -->
      <ion-card class="ion-margin-top">
        <ion-card-header>
          <ion-card-title>Instrucciones</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-list style="text-align: left;">
            <ion-item lines="none"><ion-label>1. Pide al cliente que muestre su código QR</ion-label></ion-item>
            <ion-item lines="none"><ion-label>2. Presiona "Iniciar Escaneo"</ion-label></ion-item>
            <ion-item lines="none"><ion-label>3. Apunta la cámara hacia el código QR</ion-label></ion-item>
            <ion-item lines="none"><ion-label>4. Espera la validación automática</ion-label></ion-item>
            <ion-item lines="none"><ion-label>5. Confirma para marcar como atendido</ion-label></ion-item>
          </ion-list>
        </ion-card-content>
      </ion-card>
    </ion-grid>

    <ion-grid *ngIf="escaneando">
      <ion-grid id="qr-reader" style="width: 100%; max-width: 500px; margin: 0 auto;"></ion-grid>
      
      <ion-button 
        expand="block" 
        color="danger" 
        (click)="detenerEscaneo()"
        class="ion-margin-top">
        <ion-icon name="close" slot="start"></ion-icon>
        Cancelar
      </ion-button>
    </ion-grid>
  </ion-grid>
</ion-content>
