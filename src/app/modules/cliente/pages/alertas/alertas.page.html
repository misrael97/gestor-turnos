<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="cargarAlertas($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <ion-grid class="ion-padding">
    <ion-spinner *ngIf="loading" name="crescent"></ion-spinner>

    <ion-list *ngIf="!loading && alertas.length > 0">
      <ion-item-sliding *ngFor="let alerta of alertas">
        <ion-item [color]="alerta.leida ? 'light' : ''">
          <ion-icon 
            [name]="getColor(alerta.tipo) === 'success' ? 'checkmark-circle' : getColor(alerta.tipo) === 'warning' ? 'warning' : 'alert-circle'" 
            [color]="getColor(alerta.tipo)" 
            slot="start">
          </ion-icon>
          <ion-label>
            <ion-text [class.ion-text-wrap]="true"><ion-label>{{ alerta.mensaje }}</ion-label></ion-text>
            <ion-text class="ion-text-muted"><ion-label>{{ alerta.created_at | date:'short' }}</ion-label></ion-text>
          </ion-label>
          <ion-badge *ngIf="!alerta.leida" color="primary" slot="end">Nueva</ion-badge>
        </ion-item>
        
        <ion-item-options side="end" *ngIf="!alerta.leida">
          <ion-item-option color="primary" (click)="marcarComoLeida(alerta)">
            <ion-icon name="checkmark" slot="icon-only"></ion-icon>
          </ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    </ion-list>

    <ion-grid *ngIf="!loading && alertas.length === 0" class="ion-text-center" style="margin-top: 50px;">
      <ion-icon name="notifications-off-outline" style="font-size: 64px; color: #ccc;"></ion-icon>
      <ion-text><ion-label>No tienes alertas</ion-label></ion-text>
      <ion-text class="ion-text-muted"><ion-label>Aquí aparecerán tus notificaciones</ion-label></ion-text>
    </ion-grid>
  </ion-grid>
</ion-content>
